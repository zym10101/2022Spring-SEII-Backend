# ERP灯具进销存系统体系结构描述文档

### 软工二大作业第15组

---

变更记录
---

| 变更人 | 变更时间 | 变更内容                                                     | 版本号 |
| ------ | -------- | ------------------------------------------------------------ | :----: |
| 张云菲 | 2022.7.6 | 增加逻辑视角、物理视角后端包图，增加付款单、收款单、工资单、销售明细用例业务逻辑层和数据层接口规范、数据库设计，增加数据库表 |  v1.0  |
| 张月明 | 2022.7.7 | 修改目录格式，补充引言等                                     |  v2.0  |
| 张云菲 | 2022.7.8 | 修改收付款单部分接口后置条件，增加部分数据持久化对象说明     |  v2.1  |
| 张月明 | 2022.7.8 | 增加促销策略、查看经营历程、查看经营情况、设置年终奖用例业务逻辑层和数据层接口规范 |  v3.0  |
| 沈小茜 | 2022.7.8| 增加物理视角前端包图，增加付款单、收款单、工资单、销售明细用力用户界面层接口 |  v4.0   |
| 孙宇帆 | 2022.7.8 | 增加员工管理，员工打卡，薪酬制定用例业务逻辑层和数据层接口规范，增加部分数据持久化对象说明 | v5.0 |
| 张月明 | 2022.7.9 | 增加增加促销策略、查看经营历程、查看经营情况、设置年终奖、员工打卡用例用户界面层接口和数据持久化对象说明 | v6.0 |
| 沈小茜 | 2022.7.9 | 增加员工管理、员工薪资用例用户界面层接口，调整销售人员模块用户界面层接口 | v7.0 |
| 张云菲 | 2022.7.9 | 增加目录，进程图，部署图，业务逻辑层模块的职责，账户管理逻辑层和数据层接口规范，数据层模块的职责 | v7.0 |

## 目录
<!-- TOC -->

-  [1 引言](#1-引言)
  -  [1.1 编制目的](#11-编制目的)
  -  [1.2 词汇表](#12-词汇表)
  -  [1.3 参考资料](#13-参考资料)
-  [2 产品概述](#2-产品概述)
-  [3 逻辑视角](#3-逻辑视角)
- [4 组合视角](#4-组合视角)
  - [4.1 开发包图](#41-开发包图)
  - [4.2 运行时进程](#42-运行时进程)
  - [4.3 物理部署](#43-物理部署)
- [5 接口视角](#5-接口视角)
  - [5.1 用户界面层的分解](#51-用户界面层的分解)
    - [5.1.1 用户界面层模块的职责](#511-用户界面层模块的职责)
    - [5.1.2 用户界面层模块的接口规范](#512-用户界面层模块的接口规范)
    - [5.1.3 用户界面模块的设计原理](#513-用户界面模块的设计原理)
  - [5.2 业务逻辑层的分解](#52-业务逻辑层的分解)
    - [5.2.1 业务逻辑层模块的职责](#521-业务逻辑层模块的职责)
    - [5.2.2 业务逻辑层模块的接口规范](#522-业务逻辑层模块的接口规范)
  - [5.3 数据层的分解](#53-数据层的分解)
    - [5.3.1 数据层模块的职责](#531-数据层模块的职责)
    - [5.3.2 数据层模块的接口规范](#532-数据层模块的接口规范)
- [6 信息视角](#6-信息视角)
  - [6.1 数据持久化对象](#61-数据持久化对象)
  - [6.2 数据库表](#62-数据库表)

<!-- /TOC -->
## 1 引言

### 1.1 编制目的

本报告详细完成对ERP灯具进销存系统的概要设计，从而达到指导详细设计和开发的目的，同时实现和测试人员以及用户的沟通。  
本报告面向开发人员、测试人员和用户编写，是了解系统的导航  

### 1.2 词汇表

| 词汇名称 | 词汇含义       | 备注 |
| -------- | -------------- | ---- |
| ERP      | 进销存管理系统 | 无   |

### 1.3 参考资料

* IEEE标准 
* 《软件工程与计算（卷⼆）软件开发的技术基础》
* ERP灯具进销存系统用例文档
* ERP灯具进销存系统需求规格说明文档

## 2 产品概述

参考ERP灯具进销存系统用例文档和需求规格说明文档中对产品的概括描述。

## 3 逻辑视角

​	ERP灯具进销存系统中，选择了分层体系结构风格，将系统分为3层（展示层、业务逻辑层、数据层）能够很好地事以整个高层抽象。展示层包含GUI页面的实现，业务逻辑层包含业务逻辑处理的实现，数据层负责数据的持久化和访问。分层体系结构的逻辑视角如下图所示：
![](https://seec-homework.oss-cn-shanghai.aliyuncs.com/201250022_lab5_pkg.png)

逻辑设计方案如下图所示：

![](https://seec-homework.oss-cn-shanghai.aliyuncs.com/201250022_lab7_logic.png)

## 4 组合视角

### 4.1 开发包图

ERP系统客户端物理包图如下图所示：

![](https://seec-homework.oss-cn-shanghai.aliyuncs.com/201250015_lab7_front.png)

服务器端物理包图如下图所示：

![](https://pic.imgdb.cn/item/62c8d7b1f54cd3f9372575f6.png)

### 4.2 运行时进程

在ERP灯具进销存系统中，会有多个客户端进程和一个服务端进程，其进程图如下图所示。结合部署图，客户端进程是在客户端机器上运行，服务器端进程在服务器端机器上运行。

![](https://pic.imgdb.cn/item/62c8ef7af54cd3f9373f4359.png)

### 4.3 物理部署

ERP灯具进销存系统中客户端构件是放在客户端机器上，服务器端构件是放在服务器端机器上。部署图如下图所示。

![](https://pic.imgdb.cn/item/62c8fcb9f54cd3f9374ed280.png)

## 5 接口视角

### 5.1 用户界面层的分解

#### 5.1.1 用户界面层模块的职责

|  模块   |                         职责                         |
| :-----: | :--------------------------------------------------: |
| finance |     财务人员界面，负责财务人员所需功能的人机交互     |
|   hr    | 人力资源人员界面，负责人力资源人员所需功能的人机交互 |
|   GM    |       总经理界面，负责总经理所需功能的人机交互       |

#### 5.1.2 用户界面层模块的接口规范

#####  1 finance用户界面模块的接口规范

|                        服务名                         |   key    |                            value                            |
| :---------------------------------------------------: | :------: | :---------------------------------------------------------: |
|            finance.FinanceView.getAccount             |   语法   |                     getAccount(config)                      |
|                                                       | 前置条件 |                    用户作为财务人员登录                     |
|                                                       | 后置条件 |                    显示所有公司银行账户                     |
|            finance.FinanceView.accountAdd             |   语法   |                        accountAdd()                         |
|                                                       | 前置条件 |                    用户点击增加账户按钮                     |
|                                                       | 后置条件 |                  弹出新建账户的表单对话框                   |
|           finance.FinanceView.accountDelete           |   语法   |                     accountDelete(name)                     |
|                                                       | 前置条件 |                      用户点击删除按钮                       |
|                                                       | 后置条件 |              删除改账户后页面重新显示账户列表               |
|            finance.FinanceView.submitForm             |   语法   |                        submitForm()                         |
|                                                       | 前置条件 |                      用户点击立即创建                       |
|                                                       | 后置条件 |               新建账户后页面重新显示账户列表                |
|             finance.FinanceView.editInfo              |   语法   |                        editInfo(id)                         |
|                                                       | 前置条件 |                      用户点击编辑按钮                       |
|                                                       | 后置条件 |                  弹出编辑账户的表单对话框                   |
|           finance.FinanceView.submitUpdate            |   语法   |                       submitUpdate()                        |
|                                                       | 前置条件 |                      用户点击立即修改                       |
|                                                       | 后置条件 |               修改账户后页面重新显示账户信息                |
|             finance.FinanceView.resetForm             |   语法   |                         resetForm()                         |
|                                                       | 前置条件 |                      用户点击提交表单                       |
|                                                       | 后置条件 |                        表单内容清空                         |
|           finance.FinanceView.searchAccount           |   语法   |                       searchAccount()                       |
|                                                       | 前置条件 |                用户点击输入框并输入账户名称                 |
|                                                       | 后置条件 |                      页面显示对应账户                       |
|            finance.FinanceView.handleClose            |   语法   |                      handleClose(done)                      |
|                                                       | 前置条件 |                     用户点击关闭对话框                      |
|                                                       | 后置条件 |                        弹出确认界面                         |
|           finance.PaySheetView.getPaySheets           |   语法   |                       getPaySheets()                        |
|                                                       | 前置条件 |                  用户登录并进入付款单界面                   |
|                                                       | 后置条件 |                       显示所有付款单                        |
|            finance.PaySheetView.submitForm            |   语法   |                    submitForm(formName)                     |
|                                                       | 前置条件 |                      用户点击立即创建                       |
|                                                       | 后置条件 |               新建付款单后重新显示付款单列表                |
|          finance.PaySheetView.authorization           |   语法   |                       authorization()                       |
|                                                       | 前置条件 |                             无                              |
|                                                       | 后置条件 |                   显示对应用户权限的页面                    |
|           finance.PaySheetView.handleClose            |   语法   |                      handleClose(done)                      |
|                                                       | 前置条件 |                     用户点击关闭对话框                      |
|                                                       | 后置条件 |                        弹出确认界面                         |
|            finance.PaySheetView.resetForm             |   语法   |                         resetForm()                         |
|                                                       | 前置条件 |                      用户点击提交表单                       |
|                                                       | 后置条件 |                       表单内容被清空                        |
|     finance.PaySheetView.PaySheetList.changeState     |   语法   |                     changeState(index)                      |
|                                                       | 前置条件 |                    用户选择不同单据状态                     |
|                                                       | 后置条件 |                 系统显示对应状态付款单列表                  |
|      finance.PaySheetView.PaySheetList.approval       |   语法   |                        approval(id)                         |
|                                                       | 前置条件 |                 用户点击单据旁边的同意按钮                  |
|                                                       | 后置条件 |           单据状态改变，不同状态单据列表重新显示            |
|        finance.PaySheetView.PaySheetList.deny         |   语法   |                          deny(id)                           |
|                                                       | 前置条件 |                 用户点击单据旁边的拒绝按钮                  |
|                                                       | 后置条件 |           单据状态改变，不同状态单据列表重新显示            |
|       finance.ReceiveSheetView.getReceiveSheets       | 语法语法 |                     getReceiveSheets()                      |
|                                                       | 前置条件 |                  用户登录并进入收款单界面                   |
|                                                       | 后置条件 |                       显示所有收款单                        |
|          finance.ReceiveSheetView.submitForm          | 语法语法 |                    submitForm(formName)                     |
|                                                       | 前置条件 |                      用户点击立即创建                       |
|                                                       | 后置条件 |               新建收款单后重新显示收款单列表                |
|        finance.ReceiveSheetView.authorization         |   语法   |                       authorization()                       |
|                                                       | 前置条件 |                             无                              |
|                                                       | 后置条件 |                   显示对应用户权限的页面                    |
|         finance.ReceiveSheetView.handleClose          |   语法   |                      handleClose(done)                      |
|                                                       | 前置条件 |                     用户点击关闭对话框                      |
|                                                       | 后置条件 |                        弹出确认界面                         |
|          finance.ReceiveSheetView.resetForm           |   语法   |                         resetForm()                         |
|                                                       | 前置条件 |                      用户点击提交表单                       |
|                                                       | 后置条件 |                       表单内容被清空                        |
| finance.ReceiveSheetView.ReceiveSheetList.changeState |   语法   |                     changeState(index)                      |
|                                                       | 前置条件 |                    用户选择不同单据状态                     |
|                                                       | 后置条件 |                 系统显示对应状态收款单列表                  |
|  finance.ReceiveSheetView.ReceiveSheetList.approval   |   语法   |                        approval(id)                         |
|                                                       | 前置条件 |                 用户点击单据旁边的同意按钮                  |
|                                                       | 后置条件 |           单据状态改变，不同状态单据列表重新显示            |
|    finance.ReceiveSheetView.ReceiveSheetList.deny     |   语法   |                          deny(id)                           |
|                                                       | 前置条件 |                 用户点击单据旁边的拒绝按钮                  |
|                                                       | 后置条件 |           单据状态改变，不同状态单据列表重新显示            |
|          finance.WageSheetView.getWageSheets          |   语法   |                       getWageSheets()                       |
|                                                       | 前置条件 |                  用户登录并进入工资单界面                   |
|                                                       | 后置条件 |                       显示所有工资单                        |
|           finance.WageSheetView.submitForm            |   语法   |                    submitForm(formName)                     |
|                                                       | 前置条件 |                      用户点击立即创建                       |
|                                                       | 后置条件 |               新建工资单后重新显示工资单列表                |
|          finance.WageSheetView.authorization          |   语法   |                       authorization()                       |
|                                                       | 前置条件 |                             无                              |
|                                                       | 后置条件 |                   显示对应用户权限的页面                    |
|           finance.WageSheetView.handleClose           |   语法   |                      handleClose(done)                      |
|                                                       | 前置条件 |                     用户点击关闭对话框                      |
|                                                       | 后置条件 |                        弹出确认界面                         |
|            finance.WageSheetView.resetForm            |   语法   |                         resetForm()                         |
|                                                       | 前置条件 |                      用户点击提交表单                       |
|                                                       | 后置条件 |                       表单内容被清空                        |
|    finance.WageSheetView.WageSheetList.changeState    |   语法   |                     changeState(index)                      |
|                                                       | 前置条件 |                    用户选择不同单据状态                     |
|                                                       | 后置条件 |                 系统显示对应状态工资单列表                  |
|   finance.WageSheetView.WageSheetList.firstApproval   |   语法   |                      firstApproval(id)                      |
|                                                       | 前置条件 |                 用户点击单据旁边的同意按钮                  |
|                                                       | 后置条件 |           单据状态改变，不同状态单据列表重新显示            |
|  finance.WageSheetView.WageSheetList.secondApproval   |   语法   |                     secondApproval(id)                      |
|                                                       | 前置条件 |                 用户点击单据旁边的同意按钮                  |
|                                                       | 后置条件 |           单据状态改变，不同状态单据列表重新显示            |
|       finance.WageSheetView.WageSheetList.deny        |   语法   |                          deny(id)                           |
|                                                       | 前置条件 |                 用户点击单据旁边的拒绝按钮                  |
|                                                       | 后置条件 |           单据状态改变，不同状态单据列表重新显示            |
|          finance.BussinessDetailView.getData          |   语法   |                          getData()                          |
|                                                       | 前置条件 |                      用户点击筛选按钮                       |
|                                                       | 后置条件 |                     显示对应的收付款单                      |
|          finance.BusinessHistoryView.getData          |   语法   |              getData(beginDateStr,endDateStr)               |
|                                                       | 前置条件 |                 用户设置筛选时间和单据类型                  |
|                                                       | 后置条件 | 显示这段时间里设置的单据类型（销售类/进货类/财务类/库存类） |
|         finance.BusinessSituationView.getData         |   语法   |              getData(beginDateStr,endDateStr)               |
|                                                       | 前置条件 |                      用户设置筛选时间                       |
|                                                       | 后置条件 |        显示这段时间里的收入类/支出类总额、明细和利润        |

#####  2 hr用户界面模块的接口规范

| 服务名                                       | key      | value                                      |
| -------------------------------------------- | -------- | ------------------------------------------ |
| hr.EmployeeManagementView.getAllEmployee     | 语法     | getAllEmployee(config)                     |
|                                              | 前置条件 | 用户作为人力资源人员登入                   |
|                                              | 后置条件 | 显示员工信息列表                           |
| hr.EmployeeManagementView.searchEmployee     | 语法     | searchEmployee()                           |
|                                              | 前置条件 | 用户输入员工姓名                           |
|                                              | 后置条件 | 显示对应员工信息列表                       |
| hr.EmployeeManagementView.addEmployee        | 语法     | addEmployee()                              |
|                                              | 前置条件 | 用户点击增加员工                           |
|                                              | 后置条件 | 增加员工草稿单对话框弹出                   |
| hr.EmployeeManagementView.submitForm         | 语法     | submitForm()                               |
|                                              | 前置条件 | 用户点击立即增加                           |
|                                              | 后置条件 | 增加或编辑员工信息后员工信息列表重新显示   |
| hr.EmployeeManagementView.editInfo           | 语法     | editInfo(id)                               |
|                                              | 前置条件 | 用户点击编辑按钮                           |
|                                              | 后置条件 | 编辑员工信息草稿单对话框弹出               |
| hr.EmployeeManagementView.deleteEmployee     | 语法     | deleteEmployee(id)                         |
|                                              | 前置条件 | 用户点击删除按钮                           |
|                                              | 后置条件 | 员工删除后重新显示员工信息列表             |
| hr.EmployeeClockInView.getClockInByTime      | 语法     | getClockInByTime(beginDateStr,endDateStr)  |
|                                              | 前置条件 | 用户设置筛选时间                           |
|                                              | 后置条件 | 显示这段时间里所有员工的基本信息和打卡情况 |
| hr.EmployeeWageManagementView.searchEmployee | 语法     | searchEmployee()                           |
|                                              | 前置条件 | 用户输入员工姓名                           |
|                                              | 后置条件 | 显示对应员工信息列表                       |
| hr.EmployeeWageManagementView.salaryCal      | 语法     | salaryCal(id)                              |
|                                              | 前置条件 | 用户点击工资认定按钮                       |
|                                              | 后置条件 | 工资认定草稿单对话框弹出                   |
| hr.EmployeeWageManagementView.submitForm     | 语法     | submitForm()                               |
|                                              | 前置条件 | 用户点击立即认定                           |
|                                              | 后置条件 | 无                                         |

#####  3 GM用户界面模块的接口规范

| 服务名                                              | key      | value                              |
| --------------------------------------------------- | -------- | ---------------------------------- |
| GM.UserLevelPromotionView.getUserLevelPromotion     | 语法     | getUserLevelPromotion()            |
|                                                     | 前置条件 | 用户进入用户等级促销页面           |
|                                                     | 后置条件 | 显示用户等级促销策略内容           |
| GM.TotalAmountPromotionView.getTotalAmountPromotion | 语法     | getTotalAmountPromotion()          |
|                                                     | 前置条件 | 用户进入总价促销页面               |
|                                                     | 后置条件 | 显示总价促销策略内容               |
| GM.PricePromotionView.getAll                        | 语法     | getAll()                           |
|                                                     | 前置条件 | 用户进入特价包促销页面             |
|                                                     | 后置条件 | 显示特价包促销策略内容             |
| GM.***View.EditInfo                                 | 语法     | EditInfo(row.id)                   |
|                                                     | 前置条件 | 用户选择编辑一条促销策略           |
|                                                     | 后置条件 | 显示该策略详细内容                 |
| GM.***View.submitFormEdit                           | 语法     | submitFormEdit(form)               |
|                                                     | 前置条件 | 用户编辑完成一条促销策略并点击提交 |
|                                                     | 后置条件 | 保存并更新显示策略内容             |
| GM.YearBonus.getEmployee                            | 语法     | getEmployeeWage()                  |
|                                                     | 前置条件 | 用户进入制定年终奖页面             |
|                                                     | 后置条件 | 加载员工基本信息和工资信息         |
| GM.YearBonus.addYearBonus                           | 语法     | addYearBonus(id,yearBonus)         |
|                                                     | 前置条件 | 用户编辑完成年终奖，点击提交       |
|                                                     | 后置条件 | 保存并显示员工的年终奖信息         |



#### 5.1.3 用户界面模块的设计原理

用户界面利用Vue.js框架实现

### 5.2 业务逻辑层的分解

业务逻辑层包括多个针对界面的业务逻辑处理对象。

#### 5.2.1 业务逻辑层模块的职责

业务逻辑层模块的职责如下表所示。

| 模块           | 职责                             |
| -------------- | -------------------------------- |
| AccountBl      | 负责实现账户管理界面所需要的服务 |
| PaySheetBl     | 负责实现付款单界面所需要的服务   |
| ReceiveSheetBl | 负责实现收款单界面所需要的服务   |
| WageSheetBl    | 负责实现工资单界面所需要的服务   |
| SaleSheetBl    | 负责实现销售界面所需要的服务     |
|                |                                  |

#### 5.2.2 业务逻辑层模块的接口规范

##### 1 AccountService模块的接口规范

1.1 提供的服务（供接口）

| 服务名                           | key      | value                                                  |
| -------------------------------- | -------- | ------------------------------------------------------ |
| AccountService.registerAccount   | 语法     | public void registerAccount(AccountVO accountVO)       |
|                                  | 前置条件 | accountVO属性齐全                                      |
|                                  | 后置条件 | 将处理后得到的PO存入数据库                             |
| AccountService.dropAccount       | 语法     | public void dropAccount(String accountName)            |
|                                  | 前置条件 | accountName存在于数据库中                              |
|                                  | 后置条件 | 更新数据库                                             |
| AccountService.updateAccount     | 语法     | public void updateAccount(String name, Integer id)     |
|                                  | 前置条件 | id存在且name合法                                       |
|                                  | 后置条件 | 更新id对应账户的名称                                   |
| AccountService.getAllAccount     | 语法     | public List<AccountPO> getAllAccount()                 |
|                                  | 前置条件 | 无                                                     |
|                                  | 后置条件 | 返回PO列表                                             |
| AccountService.findAccountByName | 语法     | public AccountPO findAccountByName(String accountName) |
|                                  | 前置条件 | accountName合法                                        |
|                                  | 后置条件 | 根据accountName返回符合条件的账户列表                  |

1.2 需要的服务（需接口）

| 服务名                                        | 服务                 |
| --------------------------------------------- | -------------------- |
| AccountDao.createAccount(AccountPO accountPO) | 增加一个账户         |
| AccountDao.deleteAccount(String name)         | 删除一个账户         |
| AccountDao.updateName(String name,Integer id) | 根据id更新账户名称   |
| AccountDao.findAll()                          | 返回所有账户列表     |
| AccountDao.findByName(String name)            | 根据名称模糊查询账户 |


##### 2 PaySheetService模块的接口规范

2.1 提供的服务（供接口）

| 服务名                                  | key      | value                                                        |
| --------------------------------------- | -------- | ------------------------------------------------------------ |
| PaySheetService.<br/>makePaySheet       | 语法     | public void makePaySheet<br/>(UserVO userVO, PaySheetVO paySheetVO) |
|                                         | 前置条件 | paySheetVO属性齐全                                           |
|                                         | 后置条件 | 将处理后得到的PO存入数据库                                   |
| PaySheetService.<br/>getPaySheetByState | 语法     | public List<PaySheetVO> <br/>getPaySheetByState(PaySheetState state) |
|                                         | 前置条件 | state存在于PaySheetState枚举中                               |
|                                         | 后置条件 | 根据state返回VO列表                                          |
| PaySheetService.approval                | 语法     | public void approval(String paySheetId, PaySheetState state) |
|                                         | 前置条件 | paySheetId存在且state存在于PaySheetState枚举中               |
|                                         | 后置条件 | 更新id对应单据的状态，更新客户应收金额，更新对应账户余额     |

2.2 需要的服务（需接口）

| 服务名                                                       | 服务                           |
| ------------------------------------------------------------ | ------------------------------ |
| PaySheetDao.getLatestSheet()                                 | 获取最近一条付款单             |
| PaySheetDao.saveSheet(PaySheetPO toSave)                     | 存入一条付款单记录             |
| PaySheetDao.saveBatchSheetContent<br/>(List<PaySheetContentPO> paySheetContent) | 把付款单上的具体内容存入数据库 |
| PaySheetDao.findAllSheet()                                   | 查找所有付款单                 |
| PaySheetDao.findAllByState(PaySheetState state)              | 根据state返回付款单            |
| PaySheetDao.findSheetById(String id)                         | 查找指定id的付款单             |
| PaySheetDao.findContentBySheetId(String sheetId)             | 查找指定付款单下具体的内容     |
| PaySheetDao.updateSheetState<br/>(String sheetId, PaySheetState state) | 更新指定付款单的状态           |
| PaySheetDao.updateSheetStateOnPrev<br/>(String sheetId, PaySheetState prev, PaySheetState state) | 根据当前状态更新付款单状态     |

##### 3 ReceiveSheetService模块的接口规范

3.1 提供的服务（供接口）

| 服务名                                          | key      | value                                                        |
| ----------------------------------------------- | -------- | ------------------------------------------------------------ |
| ReceiveSheetService.<br/>makeReceiveSheet       | 语法     | public void makeReceiveSheet<br/>(UserVO userVO, ReceiveSheetVO receiveSheetVO) |
|                                                 | 前置条件 | receiveSheetVO属性齐全                                       |
|                                                 | 后置条件 | 将处理后得到的PO存入数据库                                   |
| ReceiveSheetService.<br/>getReceiveSheetByState | 语法     | public List<ReceiveSheetVO> getReceiveSheetByState(ReceiveSheetState state) |
|                                                 | 前置条件 | state存在于ReceiveSheetState枚举中                           |
|                                                 | 后置条件 | 根据state返回VO列表                                          |
| ReceiveSheetService.<br/>approval               | 语法     | public void approval<br/>(String receiveSheetId, ReceiveSheetState state) |
|                                                 | 前置条件 | receiveSheetId存在且state存在于ReceiveSheetState枚举中       |
|                                                 | 后置条件 | 更新id对应单据的状态，更新客户应付金额，更新对应账户余额     |

3.2 需要的服务（需接口）

| 服务名                                                       | 服务                           |
| ------------------------------------------------------------ | ------------------------------ |
| ReceiveSheetDao.getLatestSheet()                             | 获取最近一条收款单             |
| ReceiveSheetDao.saveSheet(ReceiveSheetPO toSave)             | 存入一条收款单记录             |
| ReceiveSheetDao.saveBatchSheetContent<br/>(List<ReceiveSheetContentPO> receiveSheetContent) | 把收款单上的具体内容存入数据库 |
| ReceiveSheetDao.findAllSheet()                               | 查找所有收款单                 |
| ReceiveSheetDao.findAllByState(ReceiveSheetState state)      | 根据state返回收款单            |
| ReceiveSheetDao.findSheetById(String id)                     | 查找指定id的收款单             |
| ReceiveSheetDao.findContentBySheetId(String sheetId)         | 查找指定收款单下具体的内容     |
| ReceiveSheetDao.updateSheetState<br/>(String sheetId, ReceiveSheetState state) | 更新指定收款单的状态           |
| ReceiveSheetDao.updateSheetStateOnPrev<br/>(String sheetId, ReceiveSheetState prev, ReceiveSheetState state) | 根据当前状态更新收款单状态     |

##### 4 WageSheetService模块的接口规范

4.1 提供的服务（供接口）

| 服务名                                      | key      | value                                                        |
| ------------------------------------------- | -------- | ------------------------------------------------------------ |
| WageSheetService.<br/>makeWageSheet         | 语法     | public void makeWageSheet<br/>(UserVO userVO, WageSheetVO wageSheetVO) |
|                                             | 前置条件 | wageSheetVO属性齐全                                          |
|                                             | 后置条件 | 将处理后得到的PO存入数据库                                   |
| WageSheetService.<br/>getWageSheetByState   | 语法     | public List<WageSheetVO> getWageSheetByState<br/>(WageSheetState state) |
|                                             | 前置条件 | state存在于WageSheetState枚举中                              |
|                                             | 后置条件 | 根据state返回VO列表                                          |
| WageSheetService.<br/>approval              | 语法     | public void approval<br/>(String wageSheetId, WageSheetState state) |
|                                             | 前置条件 | wageSheetId存在且state存在于WageSheetState枚举中             |
|                                             | 后置条件 | 更新id对应单据的状态，更新对应账户余额                       |
| WageSheetService.<br/>getElevenMonthsSalary | 语法     | public BigDecimal getElevenMonthsSalary<br/>(Integer employeeId) |
|                                             | 前置条件 | id存在于employee表中                                         |
|                                             | 后置条件 | 根据员工id返回对应前11个月的工资总和                         |
| WageSheetService.<br/>getSalaryByTime       | 语法     | public int getSalaryByTime(String beginDateStr, String endDateStr); |
|                                             | 前置条件 | 开始时间小于结束时间                                         |
|                                             | 后置条件 | 获取这段时间里的所有员工的工资总额                           |

4.2 需要的服务（需接口）

| 服务名                                                       | 服务                               |
| ------------------------------------------------------------ | ---------------------------------- |
| WageSheetDao.getLatestSheet()                                | 获取最近一条工资单                 |
| WageSheetDao.saveSheet(WageSheetPO toSave)                   | 存入一条工资单记录                 |
| WageSheetDao.findAllSheet()                                  | 查找所有工资单                     |
| WageSheetDao.findAllByState(WageSheetState state)            | 根据state返回工资单                |
| WageSheetDao.findSheetById(String id)                        | 查找指定id的工资单                 |
| WageSheetDao.updateSheetState(String sheetId, WageSheetState state) | 更新指定工资单的状态               |
| WageSheetDao.updateSheetStateOnPrev<br/>(String sheetId, WageSheetState prev, WageSheetState state) | 根据当前状态更新工资单状态         |
| WageSheetDao.getSalaryByTime(Date beginTime, Date endTime)   | 获取一段时间里的所有员工的工资总额 |

##### 5 SaleSheetService模块的部分接口规范

5.1 提供的服务（供接口）

| 服务名                               | key      | value                                                        |
| ------------------------------------ | -------- | ------------------------------------------------------------ |
| SaleSheet.getSaleIODetailByTime      | 语法     | public List<SaleIODetailPO> getSaleIODetailByTime(String beginDateStr, String endDateStr, String productName, String customer, String salesman); |
|                                      | 前置条件 | 参数以属性存在于数据库                                       |
|                                      | 后置条件 | 根据各个条件筛选得到PO列表并返回                             |
| SaleSheet.getIncomeByTime            | 语法     | public int getIncomeByTime(String beginDateStr, String endDateStr); |
|                                      | 前置条件 | 开始时间小于结束时间                                         |
|                                      | 后置条件 | 获取这段时间里的销售总收入                                   |
| SaleSheet.getCostByTime              | 语法     | public int getCostByTime(String beginDateStr, String endDateStr); |
|                                      | 前置条件 | 开始时间小于结束时间                                         |
|                                      | 后置条件 | 获取这段时间里的销售成本                                     |
| SaleSheet.getDiscountByTime          | 语法     | public int getDiscountByTime(String beginDateStr, String endDateStr); |
|                                      | 前置条件 | 开始时间小于结束时间                                         |
|                                      | 后置条件 | 获取这段时间里的销售总折让                                   |
| SaleSheet.getVoucherByTime           | 语法     | public int getVoucherByTime(String beginDateStr, String endDateStr); |
|                                      | 前置条件 | 开始时间小于结束时间                                         |
|                                      | 后置条件 | 获取这段时间里的代金券总额                                   |
| SaleSheet.getSaleSheetIODetailByTime | 语法     | List<SaleSheetIODetailPO> getSaleSheetIODetailByTime(String beginDateStr, String endDateStr); |
|                                      | 前置条件 | 开始时间小于结束时间                                         |
|                                      | 后置条件 | 获取这段时间里的销售/销售退货单据                            |

5.2 需要的服务（需接口）

| 服务名                                                       | 服务                                                      |
| ------------------------------------------------------------ | --------------------------------------------------------- |
| SaleSheetDao.getSaleIODetailByTime(Date beginTime, Date endTime, String productName, String customer, String salesman) | 查询指定时间区间，商品名，客户，业务员的销售/销售退货记录 |
| SaleSheetDao.getIncomeByTime(Date beginTime, Date endTime)   | 获取一段时间里的销售总收入                                |
| SaleSheetDao.getDiscountByTime(Date beginTime, Date endTime) | 获取一段时间里的销售总折让                                |
| SaleSheetDao.getVoucherByTime(Date beginTime, Date endTime)  | 获取一段时间里的代金券总额                                |
| SaleSheetDao.getCostByTime(Date beginTime, Date endTime)     | 获取一段时间里的销售成本                                  |
| SaleSheetDao.getSaleSheetIODetailByTime(Date beginTime, Date endTime) | 获取一段时间里的销售/销售退货单据                         |

##### 6 PromotionService模块的接口规范

6.1 提供的服务（供接口）

| 服务名                                                   | key      | value                                                        |
| -------------------------------------------------------- | -------- | ------------------------------------------------------------ |
| PromotionService.<br/>findLevelAll                       | 语法     | public List<UserLevelPromotionPO> findLevelAll();            |
|                                                          | 前置条件 | 无                                                           |
|                                                          | 后置条件 | 返回UserLevelPromotionPO列表                                 |
| PromotionService.findOneByLevel                          | 语法     | public UserLevelPromotionPO findOneByLevel(Integer level);   |
|                                                          | 前置条件 | level在1-5之间                                               |
|                                                          | 后置条件 | 根据level返回PO                                              |
| PromotionService.<br/>updateUserLevelPromotionByLevel    | 语法     | public void updateUserLevelPromotionByLevel(UserLevelPromotionPO userLevelPromotionPO); |
|                                                          | 前置条件 | userLevelPromotionPO已存在                                   |
|                                                          | 后置条件 | 更新对应的userLevelPromotionPO                               |
| PromotionService.findAmountAll                           | 语法     | public List<TotalAmountPromotionPO> findAmountAll();         |
|                                                          | 前置条件 | 无                                                           |
|                                                          | 后置条件 | 返回TotalAmountPromotionPO列表                               |
| PromotionService.findOneByAmount                         | 语法     | public TotalAmountPromotionPO findOneByAmount(Integer amount); |
|                                                          | 前置条件 | amount已存在                                                 |
|                                                          | 后置条件 | 根据amount返回对应的TotalAmountPromotionPO                   |
| PromotionService.findAmountNumAll                        | 语法     | public List<Integer> findAmountNumAll();                     |
|                                                          | 前置条件 | 无                                                           |
|                                                          | 后置条件 | 返回所有总价促销策略的最低总价取值                           |
| PromotionService.<br/>updateTotalAmountPromotionByAmount | 语法     | public void updateTotalAmountPromotionByAmount<br>(TotalAmountPromotionPO totalAmountPromotionPO); |
|                                                          | 前置条件 | totalAmountPromotionPO已存在                                 |
|                                                          | 后置条件 | 更新对应的totalAmountPromotionPO                             |
| PromotionService.<br/>deleteTotalAmountPromotionById     | 语法     | public void deleteTotalAmountPromotionById(Integer id);      |
|                                                          | 前置条件 | id已存在                                                     |
|                                                          | 后置条件 | 根据id删除对应的TotalAmountPromotionPO                       |
| PromotionService.<br/>addTotalAmountPromotion            | 语法     | public void addTotalAmountPromotion<br>(TotalAmountPromotionPO totalAmountPromotionPO); |
|                                                          | 前置条件 | totalAmountPromotionPO不存在                                 |
|                                                          | 后置条件 | 将totalAmountPromotionPO添加入数据库中                       |

6.2 需要的服务（需接口）

| 服务名                                                       | 服务                               |
| ------------------------------------------------------------ | ---------------------------------- |
| PromotionDao.findLevelAll()                                  | 查找所有用户等级促销策略           |
| PromotionDao.findOneByLevel(Integer userLevel);              | 根据用户等级查找促销策略           |
| PromotionDao.updateUserLevelPromotionByLevel(UserLevelPromotionPO userLevelPromotionPO); | 更新用户等级促销策略               |
| PromotionDao.findAmountAll();                                | 查找所有总价促销策略               |
| PromotionDao.findOneByAmount(Integer amount);                | 根据总价查找促销策略               |
| PromotionDao.findAmountNumAll();                             | 查找所有总价促销策略的最低总价取值 |
| PromotionDao.updateSheetStateOnPrev<br/>(String sheetId, WageSheetState prev, WageSheetState state) | 更新总价促销策略                   |
| PromotionDao.deleteTotalAmountPromotionById(Integer id);     | 根据id删除总价促销策略             |
| PromotionDao.addTotalAmountPromotion(TotalAmountPromotionPO totalAmountPromotionPO); | 增加一条总价促销策略               |

##### 7 WarehouseService模块的部分接口规范

7.1 提供的服务（供接口）

| 服务名                                                  | key      | value                                                        |
| ------------------------------------------------------- | -------- | ------------------------------------------------------------ |
| WarehouseService.getWarehousePresent                    | 语法     | public List<WarehouseZSDPO> getWarehousePresent();           |
|                                                         | 前置条件 | 无                                                           |
|                                                         | 后置条件 | 返回WarehouseZSDPO列表                                       |
| WarehouseService.getWarehouseOverflow                   | 语法     | public List<WarehouseBYDPO> getWarehouseOverflow();          |
|                                                         | 前置条件 | 无                                                           |
|                                                         | 后置条件 | 返回WarehouseBYDPO列表                                       |
| WarehouseService.getWarehouseLoss                       | 语法     | public List<WarehouseBSDPO> getWarehouseLoss();              |
|                                                         | 前置条件 | 无                                                           |
|                                                         | 后置条件 | 返回WarehouseBSDPO列表                                       |
| WarehouseService.getOverflowByTime                      | 语法     | public int getOverflowByTime<br>(String beginDateStr, String endDateStr); |
|                                                         | 前置条件 | 开始时间小于结束时间                                         |
|                                                         | 后置条件 | 返回这段时间里的报溢总额                                     |
| WarehouseService.getLossByTime                          | 语法     | public int getLossByTime<br>(String beginDateStr, String endDateStr); |
|                                                         | 前置条件 | 开始时间小于结束时间                                         |
|                                                         | 后置条件 | 返回这段时间里的报损总额                                     |
| WarehouseService.getPresentByTime                       | 语法     | public int getPresentByTime<br>(String beginDateStr, String endDateStr); |
|                                                         | 前置条件 | 开始时间小于结束时间                                         |
|                                                         | 后置条件 | 返回这段时间里的赠送总额                                     |
| WarehouseService.<br/>getWarehouseSpecialIODetailByTime | 语法     | public List<WarehouseSpecialIODetailPO> getWarehouseSpecialIODetailByTime(String beginDateStr, String endDateStr); |
|                                                         | 前置条件 | 开始时间小于结束时间                                         |
|                                                         | 后置条件 | 返回此时间段内的报溢单/报损单/赠送单信息                     |

7.2 需要的服务（需接口）

| 服务名                                                       | 服务                                     |
| ------------------------------------------------------------ | ---------------------------------------- |
| WarehouseDao.getWarehousePresent()                           | 获取所有赠送单                           |
| WarehouseDao.getAllOverflow();                               | 获取所有报溢单                           |
| WarehouseDao.getAllLoss();                                   | 获取所有报损单                           |
| WarehouseDao.getOverflowByTime(Date beginTime, Date endTime); | 查看一段时间报溢总金额                   |
| WarehouseDao.getLossByTime(Date beginTime, Date endTime);    | 查看一段时间报损总金额                   |
| WarehouseDao.getPresentByTime(Date beginTime, Date endTime); | 查看一段时间赠送总金额                   |
| WarehouseInputSheetDao.getWarehouseSpecialIODetailByTime(Date beginTime, Date endTime); | 查询指定时间段内报溢单/报损单/赠送单信息 |

##### 8 FinancialService模块的接口规范

8.1 提供的服务（供接口）

| 服务名                              | key      | value                                                        |
| ----------------------------------- | -------- | ------------------------------------------------------------ |
| FinancialService.getPayReceiveSheet | 语法     | public List<PayReceiveSheetIODetailPO> getPayReceiveSheet(String beginDateStr, String endDateStr); |
|                                     | 前置条件 | 开始时间小于结束时间                                         |
|                                     | 后置条件 | 返回PayReceiveSheetIODetailPO集合                            |
| FinancialService.getWageSheet       | 语法     | public List<WageSheetPO> getWageSheet(String beginDateStr, String endDateStr); |
|                                     | 前置条件 | state存在于PaySheetState枚举中                               |
|                                     | 后置条件 | 返回WageSheetPO集合                                          |

8.2 需要的服务（需接口）

| 服务名                                                       | 服务             |
| ------------------------------------------------------------ | ---------------- |
| FinancialSheetDao.getPayReceiveSheet(Date beginTime, Date endTime); | 获取所有收付款单 |
| FinancialSheetDao.getWageSheet(Date beginTime, Date endTime); | 获取所有工资单   |

##### 9 AttendanceService模块的部分接口规范

9.1 提供的服务（供接口）

| 服务名                                 | key      | value                                                        |
| -------------------------------------- | -------- | ------------------------------------------------------------ |
| AttendanceService.clockIn              | 语法     | void clockIn(AttendanceVO attendanceVO);                     |
|                                        | 前置条件 | AttendanceVO对象属性齐全                                     |
|                                        | 后置条件 | 处理后得到的AttendancePO存入数据库                           |
| AttendanceService.findAttendanceRecord | 语法     | List<AttendanceVO> findAttendanceRecord(Integer employeeId); |
|                                        | 前置条件 | 该id对应的信息记录已存在                                     |
|                                        | 后置条件 | 返回AttendanceVO列表                                         |
| AttendanceService.updateBaseSalary     | 语法     | void updateBaseSalary(Integer employeeId);                   |
|                                        | 前置条件 | 该id对应的信息记录已存在                                     |
|                                        | 后置条件 | 修改数据库中该员工对应的基本薪资                             |
| WarehouseService.getAttendanceByTime   | 语法     | List<EmployeeAttendanceIODetailPO> getAttendanceByTime(String beginDateStr, String endDateStr); |
|                                        | 前置条件 | 开始时间小于结束时间                                         |
|                                        | 后置条件 | 返回这段时间里所有员工的打卡记录                             |

9.2 需要的服务（需接口）

| 服务名                                                       | 服务                               |
| ------------------------------------------------------------ | ---------------------------------- |
| AttendanceDao.addAttendanceSql(AttendancePO attendancePO);   | 存入一条打卡记录                   |
| AttendanceDao.findAttendanceById(Integer employeeId);        | 查询指定员工的打卡记录             |
| AttendanceDao.findAttendanceByNo(Integer attendanceNo);      | 获取指定编号的考勤记录             |
| AttendanceDao.updateBaseSalaryMonthlySql(Integer employeeId); | 根据考勤情况修改月薪制基本工资     |
| AttendanceDao.updateBaseSalaryCommissionSql(Integer employeeId); | 根据考勤情况修改提成制基本工资     |
| AttendanceDao.findAttendanceByTime(Date beginTime, Date endTime); | 获取指定时间段内全部员工的考勤记录 |
| EmployeePostDao.findEmployeePostById(employeeId);            | 查询指定员工的岗位信息             |

##### 10 EmployeeService模块的部分接口规范

10.1 提供的服务（供接口）

| 服务名                           | key      | value                                       |
| -------------------------------- | -------- | ------------------------------------------- |
| EmployeeService.addEmployee      | 语法     | void addEmployee(EmployeeVO employeeVO);    |
|                                  | 前置条件 | EmployeeVO对象属性齐全                      |
|                                  | 后置条件 | 处理后得到的EmployeePO存入数据库            |
| EmployeeService.updateEmployee   | 语法     | void updateEmployee(EmployeePO employeePO); |
|                                  | 前置条件 | 该id对应的信息记录已存在                    |
|                                  | 后置条件 | 修改数据库中该员工的基本信息                |
| EmployeeService.deleteEmployee   | 语法     | void deleteEmployee(Integer id);            |
|                                  | 前置条件 | 该id对应的信息记录已存在                    |
|                                  | 后置条件 | 删除数据库中该员工信息                      |
| EmployeeService.findEmployeeById | 语法     | EmployeePO findEmployeeById(Integer id);    |
|                                  | 前置条件 | 该id对应的信息记录已存在                    |
|                                  | 后置条件 | 返回该员工的所有信息                        |

10.2 需要的服务（需接口）

| 服务名                                                | 服务                               |
| ----------------------------------------------------- | ---------------------------------- |
| EmployeeDao.addEmployeeSql(EmployeePO employeePO);    | 添加一条员工信息                   |
| EmployeeDao.updateEmployeeSql(EmployeePO employeePO); | 更新指定员工的相关信息             |
| EmployeeDao.deleteEmployeeSql(Integer id);            | 删除指定员工的相关信息             |
| EmployeeDao.findEmployeeSql(Integer id);              | 根据员工编号查找指定员工的相关信息 |
| EmployeeDao.findAllEmployee();                        | 获取所有员工信息                   |
| EmployeeDao.findGeneralInfoUnion();                   | 获取基本表和岗位表内的员工信息     |
| EmployeeDao.findMonthlyInfoUnion();                   | 查找两张表内月薪制员工信息         |
| EmployeeDao.findYearlyInfoUnion();                    | 查找两张表内年薪制员工信息         |
| EmployeeDao.findCommissionInfoUnion();                | 查找两张表内提成制员工信息         |
| EmployeePostDao.findEmployeePostById(id);             | 查找员工职务信息                   |
| EmployeePostDao.deleteEmployeePostSql(id);            | 删除员工职务信息                   |
| EmployeePostDao.deleteMonthlyParaSql(id);             | 删除月薪参数某条记录               |
| EmployeePostDao.deleteBaseAndCommissionParaSql(id);   | 删除提成参数某条记录               |
| EmployeePostDao.deleteYearlyParaSql(id);              | 删除年薪参数某条记录               |
| WageService.getElevenMonthsSalary(id);                | 计算前11个月的累计薪资             |
| EmployeePostDao.getYearBonusSql(id);                  | 获取年终奖数额                     |

##### 11 EmployeePostService模块的部分接口规范

11.1 提供的服务（供接口）

| 服务名                                          | key      | value                                                        |
| ----------------------------------------------- | -------- | ------------------------------------------------------------ |
| EmployeePostService.addEmployeePostInfo         | 语法     | void addEmployeePostInfo(EmployeePostVO employeePostVO);     |
|                                                 | 前置条件 | EmployeePostVO对象属性齐全                                   |
|                                                 | 后置条件 | 处理后得到的EmployeePostPO存入数据库                         |
| EmployeePostService.updateEmployeePostInfo      | 语法     | void updateEmployeePostInfo(EmployeePostPO employeePostPO);  |
|                                                 | 前置条件 | 该id对应的信息记录已存在                                     |
|                                                 | 后置条件 | 修改数据库中该员工的岗位信息                                 |
| EmployeePostService.deleteEmployeePostInfo      | 语法     | void deleteEmployeePostInfo(Integer id);                     |
|                                                 | 前置条件 | 该id对应的信息记录已存在                                     |
|                                                 | 后置条件 | 删除数据库中该员工信息                                       |
| EmployeePostService.findEmployeePostInfoById    | 语法     | EmployeePostPO findEmployeePostInfoById(Integer id);         |
|                                                 | 前置条件 | 该id对应的信息记录已存在                                     |
|                                                 | 后置条件 | 返回该员工的所有岗位相关信息                                 |
| EmployeePostService.calculateEmployeeSalary     | 语法     | void calculateEmployeeSalary(String beginTimeStr, String endTimeStr,Integer id) |
|                                                 | 前置条件 | 开始时间小于结束时间                                         |
|                                                 | 后置条件 | 将某员工某月除税收外薪资插入表中                             |
| EmployeePostService.setYearBonusResult          | 语法     | void setYearBonusResult(Integer id,Integer yearBonus);       |
|                                                 | 前置条件 | 该id对应的信息记录已存在                                     |
|                                                 | 后置条件 | 在表中设置年终奖计算结果                                     |
| EmployeePostService.setMonthlyPara              | 语法     | void setMonthlyPara(MonthlyPayVO monthlyPayVO);              |
|                                                 | 前置条件 | MonthlyPayVO对象属性齐全                                     |
|                                                 | 后置条件 | 处理后得到的MonthlyPayPO存入数据库                           |
| EmployeePostService.setBaseAndCommissionPara    | 语法     | void setBaseAndCommissionPara(BaseAndCommissionVO baseAndCommissionVO); |
|                                                 | 前置条件 | BaseAndCommissionVO对象属性齐全                              |
|                                                 | 后置条件 | 处理后得到的BaseAndCommissionPO存入数据库                    |
| EmployeePostService.setYearlyPara               | 语法     | void setYearlyPara(YearlyPayVO yearlyPayVO);                 |
|                                                 | 前置条件 | YearlyPayVO对象属性齐全                                      |
|                                                 | 后置条件 | 处理后得到的YearlyPayPO存入数据库                            |
|                                                 | 后置条件 | 处理后得到的BaseAndCommissionPO存入数据库                    |
| EmployeePostService.updateMonthlyPara           | 语法     | void updateMonthlyPara(MonthlyPayPO monthlyPayPO);           |
|                                                 | 前置条件 | 该id对应的信息记录已存在                                     |
|                                                 | 后置条件 | 表中的月薪参数被修改                                         |
| EmployeePostService.updateBaseAndCommissionPara | 语法     | void updateBaseAndCommissionPara(BaseAndCommissionPO baseAndCommissionPO); |
|                                                 | 前置条件 | 该id对应的信息记录已存在                                     |
|                                                 | 后置条件 | 表中的提成制参数被修改                                       |
| EmployeePostService.updateYearlyPara            | 语法     | void updateYearlyPara(YearlyPayPO yearlyPayPO);              |
|                                                 | 前置条件 | 该id对应的信息记录已存在                                     |
|                                                 | 后置条件 | 表中的年薪制参数被修改                                       |

11.2 需要的服务（需接口）

| 服务名                                                       | 服务                                 |
| ------------------------------------------------------------ | ------------------------------------ |
| EmployeePostDao.addEmployeePostSql(EmployeePostPO employeePostPO); | 添加员工职务信息，不包括薪资计算结果 |
| EmployeePostDao.updateEmployeePostSql(EmployeePostPO employeePostPO); | 新员工职务信息                       |
| EmployeePostDao.deleteEmployeePostSql(Integer id);           | 删除员工职务信息                     |
| EmployeePostDao.findEmployeePostById(Integer id);            | 根据员工编号查找员工职务信息         |
| EmployeePostDao.setCalResultSql(Integer id,Integer salaryStrategyResult); | 设置薪资计算结果                     |
| EmployeePostDao.setYearBonusResultSql(Integer id,Integer yearBonus); | 设置年终奖计算结果                   |
| EmployeePostDao.getYearBonusSql(Integer id);                 | 获取年终奖计算结果                   |
| EmployeePostDao.setMonthlyParaSql(MonthlyPayPO monthlyPayPO); | 设置月薪参数                         |
| EmployeePostDao.setBaseAndCommissionParaSql(BaseAndCommissionPO baseAndCommissionPO); | 设置提成参数                         |
| EmployeePostDao.setYearlyParaSql(YearlyPayPO yearlyPayPO);   | 设置年薪制参数                       |
| EmployeePostDao.getMonthlyParaSql(Integer id);               | 查找月薪参数                         |
| EmployeePostDao.getBaseAndCommissionParaSql(Integer id);     | 查找提成参数                         |
| EmployeePostDao. getYearlyParaSql(Integer id);               | 查找年薪制参数                       |
| EmployeePostDao.updateMonthlyParaSql(MonthlyPayPO monthlyPayPO); | 修改月薪参数                         |
| EmployeePostDao.updateBaseAndCommissionParaSql(BaseAndCommissionPO baseAndCommissionPO); | 修改提成参数                         |
| EmployeePostDao.updateYearlyParaSql(YearlyPayPO yearlyPayPO); | 修改年薪制参数                       |
| EmployeePostDao.deleteMonthlyParaSql(Integer id);            | 删除月薪参数某条记录                 |
| EmployeePostDao.deleteBaseAndCommissionParaSql(Integer id);  | 删除提成参数某条记录                 |
| EmployeePostDao.deleteYearlyParaSql(Integer id);             | 删除年薪参数某条记录                 |
| EmployeePostDao.setActualSalesSql(Integer id,Integer actualSales); | 设置实际销售额                       |
| SalaryStrategyDao.getMonthlyInfo(Integer id);                | 根据id获取某员工薪资信息             |
| SalaryStrategyDao.getBaseAndCommissionInfo(Integer id);      | 根据id获取某员工薪资信息             |
| SalaryStrategyDao.getYearlyInfo(Integer id);                 | 根据id获取某员工薪资信息             |
| SaleSheetDao.getMonthlySales(Date beginTime, Date endTime, String salesName); | 根据指定时间区间和销售员查询销售金额 |
| SaleReturnsSheetDao.getMonthlyReturnSales(Date beginTime, Date endTime, String salesName); | 根据指定时间区间和销售员查询退货金额 |
| EmployeeDao.findEmployeeSql(Integer id);                     | 根据id获取某员工基本信息             |

-------------------------------

### 5.3 数据层的分解

数据层主要给业务逻辑层提供数据访问服务，包括对于持久化数据的增、删、改、查。

#### 5.3.1 数据层模块的职责

| 模块   | 职责                                                         |
| ------ | ------------------------------------------------------------ |
| Dao    | 持久化数据库的接口，提供集体载入、保存、增、删、改、查服务   |
| Mapper | 基于MySQL数据库的持久化数据库的接口，提供集体载入、保存、增、删、改、查服务 |

#### 5.3.2 数据层模块的接口规范

##### 1 AccountDao模块的接口规范

| 服务名                   | key      | value                                                        |
| ------------------------ | -------- | ------------------------------------------------------------ |
| AccountDao.createAccount | 语法     | public int createAccount(AccountPO accountPO)                |
|                          | 后置条件 | 增加一个账户                                                 |
| AccountDao.deleteAccount | 语法     | public int deleteAccount(String name)                        |
|                          | 后置条件 | 删除一个账户                                                 |
| AccountDao.updateName    | 语法     | public int updateName(String name, Integer id)               |
|                          | 后置条件 | 根据id更新账户名称                                           |
| AccountDao.updateBalance | 语法     | public int updateBalance(AccountPO accountPO)                |
|                          | 前置条件 | 只能在收付款单、工资单审批完成时自动调用，即不可以直接手动修改余额 |
|                          | 后置条件 | 更新账户余额                                                 |
| AccountDao.findAll       | 语法     | public AccountPO findByName(String name)                     |
|                          | 后置条件 | 返回所有账户列表                                             |
| AccountDao.findByName    | 语法     | public List<AccountPO> findAll()                             |
|                          | 后置条件 | 根据名称模糊查询账户                                         |

##### 2 PaySheetDao模块的接口规范

| 服务名                                 | key      | value                                                        |
| -------------------------------------- | -------- | ------------------------------------------------------------ |
| PaySheetDao.<br/>getLatestSheet        | 语法     | public PaySheetPO getLatestSheet()                           |
|                                        | 后置条件 | 获取最近一条付款单                                           |
| PaySheetDao.<br/>saveSheet             | 语法     | public int saveSheet(PaySheetPO toSave)                      |
|                                        | 后置条件 | 存入一条付款单记录                                           |
| PaySheetDao.<br/>saveBatchSheetContent | 语法     | public int saveBatchSheetContent(List<PaySheetContentPO> paySheetContent) |
|                                        | 后置条件 | 把付款单上的具体内容存入数据库                               |
| PaySheetDao.<br/>findAllSheet          | 语法     | public List<PaySheetPO> findAllSheet()                       |
|                                        | 后置条件 | 查找所有付款单                                               |
| PaySheetDao.<br/>findAllByState        | 语法     | public List<PaySheetPO> findAllByState(PaySheetState state)  |
|                                        | 后置条件 | 根据state返回付款单                                          |
| PaySheetDao.<br/>findSheetById         | 语法     | public PaySheetPO findSheetById(String id)                   |
|                                        | 后置条件 | 查找指定id的付款单                                           |
| PaySheetDao.<br/>findContentBySheetId  | 语法     | public List<PaySheetContentPO> findContentBySheetId(String sheetId) |
|                                        | 后置条件 | 查找指定付款单下具体的内容                                   |
| PaySheetDao.<br/>updateSheetState      | 语法     | public int updateSheetState(String sheetId, PaySheetState state) |
|                                        | 后置条件 | 更新指定付款单的状态                                         |
| PaySheetDao.<br>updateSheetStateOnPrev | 语法     | public int updateSheetStateOnPrev(String sheetId, PaySheetState prev, PaySheetState state) |
|                                        | 后置条件 | 根据当前状态更新付款单状态                                   |

##### 3 ReceiveSheetDao模块的接口规范

| 服务名                                      | key      | value                                                        |
| ------------------------------------------- | -------- | ------------------------------------------------------------ |
| ReceiveSheetDao.<br/>getLatestSheet         | 语法     | public ReceiveSheetPO getLatestSheet()                       |
|                                             | 后置条件 | 获取最近一条收款单                                           |
| ReceiveSheetDao.<br/>saveSheet              | 语法     | public int saveSheet(ReceiveSheetPO toSave)                  |
|                                             | 后置条件 | 存入一条收款单记录                                           |
| ReceiveSheetDao.<br/>saveBatchSheetContent  | 语法     | public int saveBatchSheetContent(List<ReceiveSheetContentPO> receiveSheetContent) |
|                                             | 后置条件 | 把收款单上的具体内容存入数据库                               |
| ReceiveSheetDao.<br/>findAllSheet           | 语法     | public List<ReceiveSheetPO> findAllSheet()                   |
|                                             | 后置条件 | 查找所有收款单                                               |
| ReceiveSheetDao.<br/>findAllByState         | 语法     | public List<ReceiveSheetPO> findAllByState(ReceiveSheetState state) |
|                                             | 后置条件 | 根据state返回收款单                                          |
| ReceiveSheetDao.<br/>findSheetById          | 语法     | public ReceiveSheetPO findSheetById(String id)               |
|                                             | 后置条件 | 查找指定id的收款单                                           |
| ReceiveSheetDao.<br/>findContentBySheetId   | 语法     | public List<ReceiveSheetContentPO> findContentBySheetId(String sheetId) |
|                                             | 后置条件 | 查找指定收款单下具体的内容                                   |
| ReceiveSheetDao.<br/>updateSheetState       | 语法     | public int updateSheetState(String sheetId, ReceiveSheetState state) |
|                                             | 后置条件 | 更新指定收款单的状态                                         |
| ReceiveSheetDao.<br/>updateSheetStateOnPrev | 语法     | public int updateSheetStateOnPrev(String sheetId, ReceiveSheetState prev, ReceiveSheetState state) |
|                                             | 后置条件 | 根据当前状态更新收款单状态                                   |

##### 4 WageSheetDao模块的接口规范

| 服务名                                   | key      | value                                                        |
| ---------------------------------------- | -------- | ------------------------------------------------------------ |
| WageSheetDao.<br/>getLatestSheet         | 语法     | public WageSheetPO getLatestSheet()                          |
|                                          | 后置条件 | 获取最近一条工资单                                           |
| WageSheetDao.<br/>saveSheet              | 语法     | public int saveSheet(WageSheetPO toSave)                     |
|                                          | 后置条件 | 存入一条工资单记录                                           |
| WageSheetDao.<br/>findAllSheet           | 语法     | public List<WageSheetPO> findAllSheet()                      |
|                                          | 后置条件 | 查找所有工资单                                               |
| WageSheetDao.<br/>findAllByState         | 语法     | public List<WageSheetPO> findAllByState(WageSheetState state) |
|                                          | 后置条件 | 根据state返回工资单                                          |
| WageSheetDao.<br/>findSheetById          | 语法     | public WageSheetPO findSheetById(String id)                  |
|                                          | 后置条件 | 查找指定id的工资单                                           |
| WageSheetDao.<br/>updateSheetState       | 语法     | public int updateSheetState(String sheetId, WageSheetState state) |
|                                          | 后置条件 | 更新指定工资单的状态                                         |
| WageSheetDao.<br/>updateSheetStateOnPrev | 语法     | public int updateSheetStateOnPrev(String sheetId, WageSheetState prev, WageSheetState state) |
|                                          | 后置条件 | 根据当前状态更新工资单状态                                   |
| WageSheetDao.getSalaryByTime             | 语法     | public int getSalaryByTime(Date beginTime, Date endTime)     |
|                                          | 后置条件 | 这段时间里的所有员工的工资总额                               |

##### 5 SaleSheetDao模块的部分接口规范

| 服务名                                  | key      | value                                                        |
| --------------------------------------- | -------- | ------------------------------------------------------------ |
| SaleSheetDao.<br/>getSaleIODetailByTime | 语法     | public List<SaleIODetailPO> getSaleIODetailByTime(Date beginTime, Date endTime, String productName, String customer, String salesman) |
|                                         | 后置条件 | 查询指定时间区间，商品名，客户，业务员的销售/销售退货记录    |
| SaleSheetDao.getIncomeByTime            | 语法     | public int getIncomeByTime(Date beginTime, Date endTime);    |
|                                         | 后置条件 | 获取一段时间里的销售总收入                                   |
| SaleSheetDao.getDiscountByTime          | 语法     | public int getDiscountByTime(Date beginTime, Date endTime);  |
|                                         | 后置条件 | 获取一段时间里的销售总折让                                   |
| SaleSheetDao.getVoucherByTime           | 语法     | public int getVoucherByTime(Date beginTime, Date endTime);   |
|                                         | 后置条件 | 获取一段时间里的代金券总额                                   |
| SaleSheetDao.getCostByTime              | 语法     | public int getCostByTime(Date beginTime, Date endTime);      |
|                                         | 后置条件 | 获取一段时间里的销售成本                                     |
| SaleSheetDao.getSaleSheetIODetailByTime | 语法     | public List<SaleSheetIODetailPO> getSaleSheetIODetailByTime(Date beginTime, Date endTime); |
|                                         | 后置条件 | 获取一段时间里的销售/销售退货单据                            |

##### 6 PromotionDao模块的接口规范

| 服务名                                               | key      | value                                                        |
| ---------------------------------------------------- | -------- | ------------------------------------------------------------ |
| PromotionDao.<br/>findLevelAll                       | 语法     | public List<UserLevelPromotionPO> findLevelAll();            |
|                                                      | 前置条件 | 无                                                           |
|                                                      | 后置条件 | 返回UserLevelPromotionPO列表                                 |
| PromotionDao.<br/>findOneByLevel                     | 语法     | public UserLevelPromotionPO findOneByLevel<br>(Integer level); |
|                                                      | 前置条件 | level在1-5之间                                               |
|                                                      | 后置条件 | 根据level返回PO                                              |
| PromotionDao.<br/>updateUserLevelPromotionByLevel    | 语法     | public void updateUserLevelPromotionByLevel(UserLevelPromotionPO userLevelPromotionPO); |
|                                                      | 前置条件 | userLevelPromotionPO已存在                                   |
|                                                      | 后置条件 | 更新对应的userLevelPromotionPO                               |
| PromotionDao.findAmountAll                           | 语法     | public List<TotalAmountPromotionPO> findAmountAll();         |
|                                                      | 前置条件 | 无                                                           |
|                                                      | 后置条件 | 返回TotalAmountPromotionPO列表                               |
| PromotionDao.findOneByAmount                         | 语法     | public TotalAmountPromotionPO findOneByAmount<br>(Integer amount); |
|                                                      | 前置条件 | amount已存在                                                 |
|                                                      | 后置条件 | 根据amount返回对应的TotalAmountPromotionPO                   |
| PromotionDao.findAmountNumAll                        | 语法     | public List<Integer> findAmountNumAll();                     |
|                                                      | 前置条件 | 无                                                           |
|                                                      | 后置条件 | 返回所有总价促销策略的最低总价取值                           |
| PromotionDao.<br/>updateTotalAmountPromotionByAmount | 语法     | public void updateTotalAmountPromotionByAmount<br>(TotalAmountPromotionPO totalAmountPromotionPO); |
|                                                      | 前置条件 | totalAmountPromotionPO已存在                                 |
|                                                      | 后置条件 | 更新对应的totalAmountPromotionPO                             |
| PromotionDao.<br/>deleteTotalAmountPromotionById     | 语法     | public void deleteTotalAmountPromotionById(Integer id);      |
|                                                      | 前置条件 | id已存在                                                     |
|                                                      | 后置条件 | 根据id删除对应的TotalAmountPromotionPO                       |
| PromotionDao.<br/>addTotalAmountPromotion            | 语法     | public void addTotalAmountPromotion<br>(TotalAmountPromotionPO totalAmountPromotionPO); |
|                                                      | 前置条件 | totalAmountPromotionPO不存在                                 |
|                                                      | 后置条件 | 将totalAmountPromotionPO添加入数据库中                       |

##### 7 WarehouseDao模块的接口规范

| 服务名                                                       | key      | value                                                        |
| ------------------------------------------------------------ | -------- | ------------------------------------------------------------ |
| WarehouseDao.getAllOverflow                                  | 语法     | public List<WarehouseBYDPO> getAllOverflow();                |
|                                                              | 前置条件 | 无                                                           |
|                                                              | 后置条件 | 返回WarehouseBYDPO列表                                       |
| WarehouseDao.getAllLoss                                      | 语法     | public List<WarehouseBSDPO> <br/>getAllLoss();               |
|                                                              | 前置条件 | 无                                                           |
|                                                              | 后置条件 | 返回WarehouseBSDPO列表                                       |
| WarehouseOutputSheetDao.<br/>getWarehousePresent             | 语法     | public List<WarehouseZSDPO><br/> getWarehousePresent();      |
|                                                              | 前置条件 | 无                                                           |
|                                                              | 后置条件 | 返回WarehouseZSDPO列表                                       |
| WarehouseDao.getLossByTime                                   | 语法     | public int getLossByTime<br/>(Date beginTime, Date endTime); |
|                                                              | 前置条件 | 开始时间小于结束时间                                         |
|                                                              | 后置条件 | 返回这段时间报损总金额                                       |
| WarehouseDao.getOverflowByTime                               | 语法     | public int getOverflowByTime<br/>(Date beginTime, Date endTime); |
|                                                              | 前置条件 | 开始时间小于结束时间                                         |
|                                                              | 后置条件 | 返回这段时间报溢总金额                                       |
| WarehouseDao.getPresentByTime                                | 语法     | public int getPresentByTime<br/>(Date beginTime, Date endTime); |
|                                                              | 前置条件 | 开始时间小于结束时间                                         |
|                                                              | 后置条件 | 返回这段时间赠送总金额                                       |
| WarehouseDao.<br/>updateTotalAmountPromotionByAmount         | 语法     | public void updateTotalAmountPromotionByAmount<br>(TotalAmountPromotionPO totalAmountPromotionPO); |
|                                                              | 前置条件 | totalAmountPromotionPO已存在                                 |
|                                                              | 后置条件 | 更新对应的totalAmountPromotionPO                             |
| WarehouseDao.<br/>deleteTotalAmountPromotionById             | 语法     | public void deleteTotalAmountPromotionById<br/>(Integer id); |
|                                                              | 前置条件 | id已存在                                                     |
|                                                              | 后置条件 | 根据id删除对应的TotalAmountPromotionPO                       |
| WarehouseDao.<br>addTotalAmountPromotion                     | 语法     | public void addTotalAmountPromotion<br>(TotalAmountPromotionPO totalAmountPromotionPO); |
|                                                              | 前置条件 | totalAmountPromotionPO不存在                                 |
|                                                              | 后置条件 | 将totalAmountPromotionPO添加入数据库中                       |
| WarehouseOutuputSheetDao.<br/>getAllSheets                   | 语法     | public List<WarehouseOutputSheetPO> getAllSheets();          |
|                                                              | 前置条件 | 无                                                           |
|                                                              | 后置条件 | 返回WarehouseOutputSheetPO列表                               |
| WarehouseOutputSheetDao.<br/>getGiftLatest                   | 语法     | public WarehouseZSDPO getGiftLatest();                       |
|                                                              | 前置条件 | 无                                                           |
|                                                              | 后置条件 | 返回最近一条赠送单WarehouseZSDPO                             |
| WarehouseInputSheetDao.<br/>getWarehouseIODetailByTime       | 语法     | public List<WarehouseIODetailPO> getWarehouseIODetailByTime<br/>(Date beginTime,Date endTime); |
|                                                              | 前置条件 | 开始时间小于结束时间                                         |
|                                                              | 后置条件 | 返回该时间段内WarehouseIODetailPO集合（出/入库数量/金额/商品信息/分类信息） |
| WarehouseInputSheetDao.<br>getWarehouseSpecialIODetailByTime | 语法     | public List<WarehouseSpecialIODetailPO> getWarehouseSpecialIODetailByTime<br/>(Date beginTime, Date endTime); |
|                                                              | 前置条件 | 开始时间小于结束时间                                         |
|                                                              | 后置条件 | 返回该时间段内WarehouseSpecialIODetailPO集合（报溢单/报损单/赠送单信息） |

##### 8 FinancialSheetDao模块的接口规范

| 服务名                               | key      | value                                                        |
| ------------------------------------ | -------- | ------------------------------------------------------------ |
| FinancialSheetDao.getPayReceiveSheet | 语法     | public List<PayReceiveSheetIODetailPO> getPayReceiveSheet(Date beginTime, Date endTime); |
|                                      | 后置条件 | 获取所有收付款单                                             |
| FinancialSheetDao.getWageSheet       | 语法     | public List<WageSheetPO> getWageSheet(Date beginTime, Date endTime); |
|                                      | 后置条件 | 获取所有工资单                                               |

##### 9 AttendanceDao模块的接口规范

| 服务名                                      | key      | value                                                        |
| ------------------------------------------- | -------- | ------------------------------------------------------------ |
| AttendanceDao.addAttendanceSql              | 语法     | int addAttendanceSql(AttendancePO attendancePO);             |
|                                             | 前置条件 | AttendancePO 对象属性齐全                                    |
|                                             | 后置条件 | 数据库中新增AttendancePO 对象                                |
| AttendanceDao.findAttendanceById            | 语法     | List<AttendancePO> findAttendanceById(Integer employeeId);   |
|                                             | 前置条件 | AttendancePO 对象已存在                                      |
|                                             | 后置条件 | 返回AttendancePO 对象列表                                    |
| AttendanceDao.indAttendanceByNo             | 语法     | AttendancePO findAttendanceByNo(Integer attendanceNo);       |
|                                             | 前置条件 | AttendancePO 对象已存在                                      |
|                                             | 后置条件 | 返回AttendancePO 对象列表                                    |
| AttendanceDao.updateBaseSalaryMonthlySql    | 语法     | void updateBaseSalaryMonthlySql(Integer employeeId);         |
|                                             | 前置条件 | MonthlyPayPO 对象已存在                                      |
|                                             | 后置条件 | 更新对应的MonthlyPayPO                                       |
| AttendanceDao.updateBaseSalaryCommissionSql | 语法     | void updateBaseSalaryCommissionSql(Integer employeeId);      |
|                                             | 前置条件 | BaseAndCommissionPO对象已存在                                |
|                                             | 后置条件 | 更新对应的BaseAndCommissionPO                                |
| AttendanceDao.findAttendanceByTime          | 语法     | List<EmployeeAttendanceIODetailPO> findAttendanceByTime(Date beginTime, Date endTime); |
|                                             | 前置条件 | 开始时间小于结束时间                                         |
|                                             | 后置条件 | 返回指定时间段内全部员工的考勤记录                           |

##### 10 EmployeeDao模块的接口规范

| 服务名                              | key      | value                                                        |
| ----------------------------------- | -------- | ------------------------------------------------------------ |
| EmployeeDao.addEmployeeSql          | 语法     | int addEmployeeSql(EmployeePO employeePO);                   |
|                                     | 前置条件 | EmployeePO 对象属性齐全                                      |
|                                     | 后置条件 | 数据库中新增EmployeePO  对象                                 |
| EmployeeDao.updateEmployeeSql       | 语法     | int updateEmployeeSql(EmployeePO employeePO);                |
|                                     | 前置条件 | EmployeePO 对象已存在                                        |
|                                     | 后置条件 | 数据库中更新EmployeePO  对象                                 |
| EmployeeDao.deleteEmployeeSql       | 语法     | void deleteEmployeeSql(Integer id);                          |
|                                     | 前置条件 | EmployeePO对象已存在                                         |
|                                     | 后置条件 | 数据库中删除EmployeePO  对象                                 |
| EmployeeDao.findEmployeeSql         | 语法     | EmployeePO findEmployeeSql(Integer id);                      |
|                                     | 前置条件 | EmployeePO 对象已存在                                        |
|                                     | 后置条件 | 返回对应的EmployeePO                                         |
| EmployeeDao.findAllEmployee         | 语法     | List<EmployeeWageIODetailPO> findAllEmployee();              |
|                                     | 前置条件 | 无                                                           |
|                                     | 后置条件 | 返回EmployeePO列表                                           |
| EmployeeDao.findGeneralInfoUnion    | 语法     | List<EmployeeInfoUnionGeneralPO> findGeneralInfoUnion();     |
|                                     | 前置条件 | 无                                                           |
|                                     | 后置条件 | 返回EmployeeInfoUnionGeneralPO列表                           |
| EmployeeDao.findMonthlyInfoUnion    | 语法     | List<EmployeeInfoUnionMonthlyPO> findMonthlyInfoUnion();     |
|                                     | 前置条件 | 无                                                           |
|                                     | 后置条件 | 返回EmployeeInfoUnionMonthlyPO列表                           |
| EmployeeDao.findYearlyInfoUnion     | 语法     | List<EmployeeInfoUnionYearlyPO> findYearlyInfoUnion();       |
|                                     | 前置条件 | 无                                                           |
|                                     | 后置条件 | 返回EmployeeInfoUnionYearlyPO列表                            |
| EmployeeDao.findCommissionInfoUnion | 语法     | List<EmployeeInfoUnionCommissionPO> findCommissionInfoUnion(); |
|                                     | 前置条件 | 无                                                           |
|                                     | 后置条件 | 返回EmployeeInfoUnionCommissionPO列表                        |

##### 11 EmployeePostDao模块的接口规范

| 服务名                                         | key      | value                                                        |
| ---------------------------------------------- | -------- | ------------------------------------------------------------ |
| EmployeePostDao.addEmployeePostSql             | 语法     | void addEmployeePostSql(EmployeePostPO employeePostPO);      |
|                                                | 前置条件 | EmployeePostPO 对象属性完整                                  |
|                                                | 后置条件 | 在数据库中增加一个EmployeePostPO对象                         |
| EmployeePostDao.updateEmployeePostSql          | 语法     | void updateEmployeePostSql(EmployeePostPO employeePostPO);   |
|                                                | 前置条件 | EmployeePostPO 对象存在                                      |
|                                                | 后置条件 | 该EmployeePostPO 对象被更新                                  |
| EmployeePostDao.deleteEmployeePostSql          | 语法     | void deleteEmployeePostSql(Integer id);                      |
|                                                | 前置条件 | EmployeePostPO 对象存在                                      |
|                                                | 后置条件 | 该EmployeePostPO 对象被删除                                  |
| EmployeePostDao.findEmployeePostById           | 语法     | EmployeePostPO findEmployeePostById(Integer id);             |
|                                                | 前置条件 | 该EmployeePostPO 对象存在                                    |
|                                                | 后置条件 | 返回EmployeePostPO 对象                                      |
| EmployeePostDao.setCalResultSql                | 语法     | void setCalResultSql(Integer id,Integer salaryStrategyResult); |
|                                                | 前置条件 | 该EmployeePostPO 对象存在                                    |
|                                                | 后置条件 | 在表中插入应发月薪                                           |
| EmployeePostDao.setYearBonusResultSql          | 语法     | void setYearBonusResultSql(Integer id,Integer yearBonus);    |
|                                                | 前置条件 | 该EmployeePostPO 对象存在                                    |
|                                                | 后置条件 | 在表中设置年终奖                                             |
| EmployeePostDao.getYearBonusSql                | 语法     | Integer getYearBonusSql(Integer id);                         |
|                                                | 前置条件 | EmployeePostPO 已存在                                        |
|                                                | 后置条件 | 返回年终奖数额                                               |
| EmployeePostDao.setActualSalesSql              | 语法     | void setActualSalesSql(Integer id,Integer actualSales);      |
|                                                | 前置条件 | EmployeePostPO 已存在                                        |
|                                                | 后置条件 | 在表中设置实际销售额                                         |
| EmployeePostDao.setMonthlyParaSql              | 语法     | void setMonthlyParaSql(MonthlyPayPO monthlyPayPO);           |
|                                                | 前置条件 | MonthlyPayPO 对象属性完整                                    |
|                                                | 后置条件 | 在数据库中增加一个MonthlyPayPO 对象                          |
| EmployeePostDao.setBaseAndCommissionParaSql    | 语法     | void setBaseAndCommissionParaSql(BaseAndCommissionPO baseAndCommissionPO); |
|                                                | 前置条件 | BaseAndCommissionPO 对象属性完整                             |
|                                                | 后置条件 | 在数据库中增加一个BaseAndCommissionPO 对象                   |
| EmployeePostDao.setYearlyParaSql               | 语法     | void setYearlyParaSql(YearlyPayPO yearlyPayPO);              |
|                                                | 前置条件 | YearlyPayPO 对象属性完整                                     |
|                                                | 后置条件 | 在数据库中增加一个YearlyPayPO 对象                           |
| EmployeePostDao.getMonthlyParaSql              | 语法     | MonthlyPayPO getMonthlyParaSql(Integer id);                  |
|                                                | 前置条件 | MonthlyPayPO 已存在                                          |
|                                                | 后置条件 | 返回MonthlyPayPO 对象                                        |
| EmployeePostDao.getBaseAndCommissionParaSql    | 语法     | BaseAndCommissionPO getBaseAndCommissionParaSql(Integer id); |
|                                                | 前置条件 | BaseAndCommissionPO 已存在                                   |
|                                                | 后置条件 | 返回BaseAndCommissionPO 对象                                 |
| EmployeePostDao.getYearlyParaSql               | 语法     | YearlyPayPO getYearlyParaSql(Integer id);                    |
|                                                | 前置条件 | YearlyPayPO 已存在                                           |
|                                                | 后置条件 | 返回YearlyPayPO 对象                                         |
| EmployeePostDao.updateMonthlyParaSql           | 语法     | void updateMonthlyParaSql(MonthlyPayPO monthlyPayPO);        |
|                                                | 前置条件 | MonthlyPayPO 已存在                                          |
|                                                | 后置条件 | 在数据库中更新MonthlyPayPO 对象                              |
| EmployeePostDao.updateBaseAndCommissionParaSql | 语法     | void updateBaseAndCommissionParaSql(BaseAndCommissionPO baseAndCommissionPO); |
|                                                | 前置条件 | BaseAndCommissionPO 已存在                                   |
|                                                | 后置条件 | 在数据库中更新BaseAndCommissionPO 对象                       |
| EmployeePostDao.updateYearlyParaSql            | 语法     | void updateYearlyParaSql(YearlyPayPO yearlyPayPO);           |
|                                                | 前置条件 | YearlyPayPO 已存在                                           |
|                                                | 后置条件 | 在数据库中更新YearlyPayPO 对象                               |
| EmployeePostDao.deleteMonthlyParaSql           | 语法     | void deleteMonthlyParaSql(Integer id);                       |
|                                                | 前置条件 | MonthlyPayPO 已存在                                          |
|                                                | 后置条件 | 在数据库中删除MonthlyPayPO 对象                              |
| EmployeePostDao.deleteBaseAndCommissionParaSql | 语法     | void deleteBaseAndCommissionParaSql(Integer id);             |
|                                                | 前置条件 | BaseAndCommissionPO 已存在                                   |
|                                                | 后置条件 | 在数据库中删除BaseAndCommissionPO 对象                       |
| EmployeePostDao.deleteYearlyParaSql            | 语法     | void deleteYearlyParaSql(Integer id);                        |
|                                                | 前置条件 | YearlyPayPO 已存在                                           |
|                                                | 后置条件 | 在数据库中删除YearlyPayPO 对象                               |

## 6 信息视角

### 6.1 数据持久化对象

AccountPO类：账户id，账户名称，账户余额

PaySheetPO类：付款单单据编号，客户id，操作员名称，付款单单据状态，总额，创建时间

PaySheetContentPO类：自增id，所属的付款单的单据编号，银行账户，转账金额，备注

ReceiveSheetPO类：收款单单据编号，客户id，操作员名称，收款单单据状态，总额，创建时间

ReceiveSheetContentPO类：自增id，所属的收款单的单据编号，银行账户，转账金额，备注

WageSheetPO类：工资单单据编号，员工id，员工姓名，操作员名称，工资单单据状态，员工银行账户，应发工资，扣除税款，实发工资，创建时间，是否计算年终奖

SaleIODetailPO类：销售操作类型，销售/销售退货单单据编号，商品名，商品数量，商品单价，商品总价，销售/销售退货单据创建时间

AttendancePO类：打卡记录编号，员工编号，打卡日期

BaseAndCommissionPO类：id，基本工资，提成比率，当月实际销售额

EmployeePO类：id，姓名，性别，出生日期，电话号码

EmployeePostPO类：id，银行账号，工作岗位，薪资计算方式，应发月薪，年终奖

MonthlyPayPO类：id，基本工资，岗位工资，岗位级别

YearlyPayPO类：id，年薪

EmployeeWageIODetailPO类：id，员工姓名，员工性别，出生日期，电话号码，工作岗位，前11个月工资总和，年终奖

EmployeeAttendanceIODetailPO类：id，员工姓名，员工性别，出生日期，电话号码，工作岗位，打卡时间

UserLevelPromotionPO类：用户等级，赠品，折让，代金券，起始日期，结束日期

TotalAmountPromotionPO类：最低总价，赠品，代金券，起始日期，结束日期

WarehouseSpecialIODetailPO类：类型（报溢单/报损单/赠送单），特殊单据id，商品名，商品数量，商品单价，创建时间

WarehouseBSDPO类：报损单单据编号，批次，操作员，创建时间，单据状态，商品ID，商品报损数量，单价，出厂日期，备注

WarehouseBYDPO类：报溢单单据编号，批次，操作员，创建时间，单据状态，商品ID，商品报溢数量，单价，出厂日期，备注

WarehouseZSDPO类：赠送单单据编号，批次，操作员，创建时间，单据状态，商品ID，商品赠送数量，单价，出厂日期，备注

### 6.2 数据库表

数据库中包含account表、attendance表、base_and_commission表、category表、customer表、employee表、employee_bank_account表、employee_post表、monthly_pay表、pay_sheet表、pay_sheet_content表、product表、purchase_returns_sheet表、purchase_returns_sheet_content表、purchase_sheet表、purchase_sheet_content表、receive_sheet表、receive_sheet_content表、sale_returns_sheet表、sale_returns_sheet_content表、sale_sheet表、sale_sheet_content表、total_amount_promotion表、user表、user_level_promotion表、wage_sheet表、warehouse表、warehouse_bsd_sheet表、warehouse_byd_sheet表、warehouse_input_sheet表、warehouse_input_sheet_content表、warehouse_output_sheet表、warehouse_output_sheet_content表、warehouse_zsd_sheet表、yearly_pay表。